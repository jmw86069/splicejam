<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Prepare sashimi plot required data — sashimiDataConstants • splicejam</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Prepare sashimi plot required data — sashimiDataConstants" />
<meta property="og:description" content="Prepare sashimi plot required data, deriving data objects as needed" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">splicejam</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.69.900</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/basic-rnaseq-workflow.html">Splicejam basic RNAseq workflow</a>
    </li>
    <li>
      <a href="../articles/create-a-sashimi-plot.html">Create a Sashimi Plot</a>
    </li>
    <li>
      <a href="../articles/shiny-server-for-sashimi-plots.html">Shiny server for Sashimi Plots</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="http://github.com/jmw86069/splicejam/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Prepare sashimi plot required data</h1>
    <small class="dont-index">Source: <a href='http://github.com/jmw86069/splicejam/blob/master/R/splicejam-shiny-data.R'><code>R/splicejam-shiny-data.R</code></a></small>
    <div class="hidden name"><code>sashimiDataConstants.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Prepare sashimi plot required data, deriving data objects as needed</p>
    </div>

    <pre class="usage"><span class='fu'>sashimiDataConstants</span><span class='op'>(</span>
  gtf <span class='op'>=</span> <span class='cn'>NULL</span>,
  txdb <span class='op'>=</span> <span class='cn'>NULL</span>,
  tx2geneDF <span class='op'>=</span> <span class='cn'>NULL</span>,
  exonsByTx <span class='op'>=</span> <span class='cn'>NULL</span>,
  cdsByTx <span class='op'>=</span> <span class='cn'>NULL</span>,
  detectedTx <span class='op'>=</span> <span class='cn'>NULL</span>,
  detectedGenes <span class='op'>=</span> <span class='cn'>NULL</span>,
  flatExonsByGene <span class='op'>=</span> <span class='cn'>NULL</span>,
  flatExonsByTx <span class='op'>=</span> <span class='cn'>NULL</span>,
  envir <span class='op'>=</span> <span class='cn'>NULL</span>,
  empty_uses_farrisdata <span class='op'>=</span> <span class='cn'>TRUE</span>,
  use_memoise <span class='op'>=</span> <span class='cn'>TRUE</span>,
  verbose <span class='op'>=</span> <span class='cn'>FALSE</span>,
  <span class='va'>...</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>gtf, txdb, tx2geneDF, exonsByTx, cdsByTx</th>
      <td><p>objects used to define
the overall set of genes, transcripts, and associated exons and
CDS exons. See this function
description for more detail.</p></td>
    </tr>
    <tr>
      <th>detectedTx, detectedGenes, flatExonsByGene, flatExonsByTx</th>
      <td><p>objects used to derive a specific subset of gene-exon models
using only detected transcripts or genes. See this function
description for more detail.</p></td>
    </tr>
    <tr>
      <th>envir</th>
      <td><p><code>environment</code> where data will be prepared, or when
<code>envir=NULL</code> a new environment will be created and returned.</p></td>
    </tr>
    <tr>
      <th>empty_uses_farrisdata</th>
      <td><p><code>logical</code> indicating whether to
use data from the Github R package <code>"jmw86069/farrisdata"</code>
if no data is supplied to this function. This behavior is
intended to make it easy to use farrisdata to recreate
the Sashimi plots in that publication.</p></td>
    </tr>
    <tr>
      <th>use_memoise</th>
      <td><p><code>logical</code> indicating whether to use <code>memoise</code>
to cache intermediate data files for exons, flattened exons,
transcript-gene data, and so on. This mechanism reduces
time to render sashimi plots that re-use the same gene.
All memoise cache folders are named with <code>"_memoise"</code>.</p></td>
    </tr>
    <tr>
      <th>verbose</th>
      <td><p><code>logical</code> indicating whether to print verbose output.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>additional arguments are ignored.</p></td>
    </tr>
    <tr>
      <th>default_gene</th>
      <td><p><code>character</code> string indicating the default
gene to use for the initial R-shiny figure.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p><code>environment</code> that contains the required data objects
for splicejam sashimi plots. Note that the environment itself
is updated during processing, so the environment does not
need to be returned for the data contained inside it to
be updated by this function.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>This function performs a subset of steps performed by
<code><a href='sashimiAppConstants.html'>sashimiAppConstants()</a></code>, focusing only on data required
for gene-exon structure. The <code><a href='sashimiAppConstants.html'>sashimiAppConstants()</a></code> defines
<code>color_sub</code> and validates <code>filesDF</code>, then calls this function
<code>sashimiDataConstants()</code> to prepare and validate the gene-exon
data.</p>
<p>Data derived by this function <code>sashimiDataConstants()</code>:</p><ul>
<li><p><strong>txdb</strong>: <code>TranscriptDb</code> object used to derive <code>exonsByTx</code>
and <code>cdsByTx</code> if either object does not already exist. If <code>txdb</code>
is not supplied, it is derived from <code>gtf</code> using
<code><a href='https://rdrr.io/pkg/GenomicFeatures/man/makeTxDbFromGFF.html'>GenomicFeatures::makeTxDbFromGFF()</a></code>.</p></li>
<li><p><strong>tx2geneDF</strong>: <code>data.frame</code> with colnames: <code>"transcript_id"</code> and
<code>"gene_name"</code>.</p></li>
<li><p><strong>gtf</strong>: <code>character</code> path to a GTF/GFF/GFF3 file, suitable for
<code><a href='https://rdrr.io/pkg/GenomicFeatures/man/makeTxDbFromGFF.html'>GenomicFeatures::makeTxDbFromGFF()</a></code>. The <code>gtf</code> is only used
if <code>tx2geneDF</code> or <code>exonsByTx</code> are not supplied. Note that
when <code>gtf</code> points to a remote server, the file is copied to
the current working directory for more rapid use.
If the file already exists in the local directory, it is re-used.</p></li>
<li><p><strong>exonsByTx</strong>: <code>GRangesList</code> object, named by <code>"transcript_id"</code>,
containing all exons for each transcript. It is derived from <code>txdb</code>
if not supplied; and names should match <code>tx2geneDF$transcript_id</code>.</p></li>
<li><p><strong>cdsByTx</strong>: <code>GRangesList</code> object, named by <code>"transcript_id"</code>,
containing only CDS (protein-coding) exons for each transcript.
It is derived from <code>txdb</code> if not supplied;
and names should match <code>tx2geneDF$transcript_id</code>.</p></li>
<li><p><strong>detectedTx</strong>: <code>character</code> vector of <code>tx2geneDF$transcript_id</code> values,
representing a subset of transcripts detected above background.
See <code>definedDetectedTx()</code> for one strategy to define detected transcripts.
If <code>detectedTx</code> does not exist, it is defined by all transcripts
present in <code>tx2geneDF$transcript_id</code>. Note this step can be the
rate-limiting step in the preparation of <code>flatExonsByTx</code>.</p></li>
<li><p><strong>detectedGenes</strong>: <code>character</code> vector of values that match
<code>tx2geneDF$gene_name</code>. If it is not supplied, it is inferred
from <code>detectedTx</code> and <code>tx2geneDF$transcript_id</code>.</p></li>
<li><p><strong>flatExonsByGene</strong>: <code>GRangesList</code> object containing non-overlapping
exons for each gene, whose names match <code>tx2geneDF$gene_name</code>. If not
supplied, it is derived using <code><a href='flattenExonsBy.html'>flattenExonsBy()</a></code> and objects
<code>exonsByTx</code>, <code>cdsByTx</code>, <code>detectedTx</code>, and <code>tx2geneDF</code>. This step is
the key step for using a subset of detected transcripts, in order
to produce a clean gene-exon model.</p></li>
<li><p><strong>flatExonsByTx</strong>: <code>GRangesList</code> object containing non-overlapping
exons for each transcript. If not
supplied, it is derived using <code><a href='flattenExonsBy.html'>flattenExonsBy()</a></code> and objects
<code>exonsByTx</code>, <code>cdsByTx</code>, <code>detectedTx</code>, and <code>tx2geneDF</code>. This step is
the key step for using a subset of detected transcripts, in order
to produce a clean transcript-exon model.</p></li>
</ul>

<p>When <code>use_memoise=TRUE</code> several R objects are cached using
<code><a href='https://memoise.r-lib.org/reference/memoise.html'>memoise::memoise()</a></code>, to help re-use of prepared R objects,
and to help speed the re-use of data within the R-shiny app:</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p>Other splicejam R-shiny functions: 
<code><a href='launchSashimiApp.html'>launchSashimiApp</a>()</code>,
<code><a href='sashimiAppConstants.html'>sashimiAppConstants</a>()</code>,
<code><a href='sashimiAppServer.html'>sashimiAppServer</a>()</code>,
<code><a href='sashimiAppUI.html'>sashimiAppUI</a>()</code></p></div>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by James M. Ward, Shannon Farris.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


